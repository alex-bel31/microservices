# Микросервисы: масштабирование

### Задача 1: Кластеризация

**Kubernetes (k8s)**

* **Поддержка контейнеров** - работает поверх Docker/Containerd/CRI-O.

* **Обнаружение сервисов и маршрутизация запросов**

  * Сервис Discovery реализован через `kube-dns` (CoreDNS).
  * Внутренние сервисы доступны по кластерным DNS-именам.
  * Для внешнего доступа используется `Ingress Controller` (например, Nginx Ingress, Traefik, Istio Gateway).

* **Горизонтальное масштабирование**
  Любой Deployment можно масштабировать `kubectl scale --replicas=N` или через манифесты.

* **Автоматическое масштабирование**

  * `HorizontalPodAutoscaler` (HPA) масштабирует поды по нагрузке, CPU, RAM или кастомные метрики из Prometheus Adapter.
  * `Cluster Autoscaler` масштабирует ноды, если ресурсов не хватает.

* **Разделение ресурсов**

  * Сервисы типа `ClusterIP` доступны только внутри кластера.
  * `NodePort` и `LoadBalancer` дают доступ снаружи.
  * `Ingress` управляет внешним маршрутизатором HTTP/HTTPS.

* **Конфигурация и секреты**

  * `ConfigMap` для обычных переменных окружения и конфигов.
  * `Secret` для паролей, API-ключей, сертификатов, можно интегрировать HashiCorp Vault или KMS облака.
  * Подставляются в контейнеры как env-переменные или файлы.

Kubernetes закрывает все требования и подходит как для разработки, так и для продакшн-кластеров.